<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="dist/themes/default/style.min.css" />
<script src="dist/libs/jquery.js"></script>
<script src="dist/jstree.min.js"></script>
<title>文件浏览</title>
<style type="text/css">
input[type="text"] {
  width: 500px;
}
</style>
<script type="text/javascript">
$(function () {
    $.jstree.defaults.core.data
    // create an instance when the DOM is ready
    $('#jstree').jstree({
        'core' : {
            'data' :
            %%TREE_DATA%%
        }
    });
    // bind to events triggered on the tree
    $('#jstree').on("changed.jstree", function (e, data) {
        var isDirectory = data.node.data.is_directory;
        if (!isDirectory) {
            var filePath = data.node.data.path;
            var fileExtension =  filePath.split('/').pop().split('.').pop();
            var url;
            if (fileExtension === 'db'
            || fileExtension === 'rdb'
            || fileExtension === 'sqlite'
            || fileExtension === 'sqlite3') {
                // database inspect
                url = window.location.origin + '/database_inspect.html?db_path=' + filePath;
            } else {
                // file preview
                url = window.location.origin + '/file_preview.html?file_path=' + filePath;
            }
            window.open(url);
        }
    });
});
</script>
</head>
<body>
    <!-- setup a container element -->
    <div id="jstree">
    </div>
</body>
</html>
